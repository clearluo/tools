#author:luosw
#create date:  2014-04-21
#modify date:2015-11-17

MYDIR=$HOME/luosw
CURTIME=`date +%Y%m%d%H%M`

if [ $# -eq 1 ]
then
if [ "$1" == "testdelay" ]
then
	TEST=testdelay
fi
fi

cd $MYDIR
if [ $? -eq 0 ]
then
 echo "[cd xx] is successful!!!"
else
 echo "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[cd xx] is fail!!!"
 exit
fi

rm -rf trunk*
if [ $? -eq 0 ]
then
 echo "[rm -rf trunk*] is successful!!!"
else
 echo "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[rm -rf trunk*] is fail!!!"
 exit
fi

rz
if [ $? -eq 0 ]
then
 echo "[rz] is successful!!!"
else
 echo "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[rz] is fail!!!"
 exit
fi

cp ~/Service/bin/serviceswitch ~/Service/bin/serviceswitch.bak.$CURTIME
if [ $? -eq 0 ]
then
 echo "[cp serviceswitch serviceswitch.bak.xxxx] is successful"
else
 echo "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[cp serviceswitch serviceswitch.bak.xxxx] is fail!!!"
 exit
fi

unzip trunk.zip
if [ $? -eq 0 ]
then
 echo "[unzip trunk.zip] is successful!!!"
else
 echo "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[unzip trunk.zip] is fail!!!"
 exit
fi

cd trunk
if [ $? -eq 0 ]
then
 echo "[cd trunk] is successful!!!"
else
 echo "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[cd trunk] is fail!!!"
 exit
fi

chmod u+x build
if [ $? -eq 0 ]
then
 echo "[chmod u+x build] is successful!!!"
else
 echo "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[chmod u+x build] is fail!!!"
 exit
fi

./build serviceswitch $TEST
#cd ./
#if [ $? -eq 0 ]
#then
# echo "[./build serviceswitch] is successful!!!"
#else
# echo "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[./build serviceswitch] is fail!!!"
# exit
#fi

cd ../
if [ $? -eq 0 ]
then
	rm -rf trunk*
else
	echo "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[]"
exit
fi

